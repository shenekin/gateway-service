### 模板2：代码迭代优化---demo
```
任务：优化【gateway-service服务模块中utils下settings.py可以 选择通过外部引入加载】，属于【产品名称】项目
技术栈：Python 3.10 + FastAPI 0.104 + MySQL 8.0
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【settings.py中增加配置文件.env方式导入，多 个环境切换比如.env,.env.dev,.env.prod,通过切换选择相应环境，记得所有都增加单机和集群配置，可以选择启用单实例还是集群】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.
```

### 模板2：代码迭代优化 2025-12-25 -1
```
任务：优化【gateway-service服务模块中utils下settings.py可以 选择通过外部引入加载】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【settings.py中增加配置文件.env方式导入，多 个环境切换比如.env,.env.dev,.env.prod,通过切换选择相应环境，记得所有都增加单机和集群配置，可以选择启用单实例还是集群】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.


### 模板2：代码迭代优化 2025-12-25 -2
```
任务：优化【gateway-service服务模块中utils下settings.py可以 选择通过外部引入加载】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【需要自动创建.env,.env.dev,.env.prod示例文件并且根据用户选择环境加载,记得所有mysql,redis,nacos都增加单机和集群配置通过用户选择自动加载，可以选择启用单机还是集群】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
功能需求：
1.  核心功能：【 增加数据库建库，建表. 自动脚本以及外部可以手动运行的脚本 】
2.  输入参数：【自动生成并注释】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.

### 模板2：代码迭代优化 2025-12-25 -3
```
任务：优化【gateway-service服务模块中utils下settings.py可以 选择通过外部引入加载】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【当前项目无法启动增加统一允许入口，端口为8001,请修改所有相关的参数改成8001】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
功能需求：
1.  核心功能：在入口增加run.py文件并且让项目可以启动，请调试项目
2.  输入参数：【自动生成并注释】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.



### 模板2：代码迭代优化 2025-12-25 -4
```
任务：优化【gateway-service服务模块】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【生成单独需要外部依赖创建的单独文件，比如database 库，表等，可以手动和自动 创建两种类型】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
功能需求：
1.  核心功能：当前未看到实际生产中改创建外部哪些依赖东西，比如数据库和表等
2.  输入参数：【自动生成并注释】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.


### 模板2：代码迭代优化 2025-12-29 -5
```
任务：优化【gateway-service服务模块】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【单个用户10次登陆后，进行限流，但是其它用户也受到限制，我需要针对每一个用户进行限制.】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
功能需求：
1.  核心功能：当前未看到实际生产中改创建外部哪些依赖东西，比如数据库和表等
2.  输入参数：【自动生成并注释】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.


### 模板2：代码迭代优化 2025-12-29 -6
```
任务：优化【gateway-service服务模块】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【当前redis已经实现针对每一个用户进行限制，我现在需要结合mysql进行整合，请帮我完成】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
功能需求：
1.  核心功能：当前未看到实际生产中改创建外部哪些依赖东西，比如数据库和表等
2.  输入参数：【自动生成并注释】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.

### 模板2：代码迭代优化 2025-12-29 -7
```
任务：优化【gateway-service服务模块】，属于【cloud resource management system】项目
代码规范：严格遵循已提供的Python代码规范[Developer_coding_rules_Principles] 文件规范
当前问题：【用户可以拿到access + refresh明 auth-service 的登录、签名、过期时间配置都是 OK,下一步不再是“调 JWT”，而是进入 生产级使用阶段】
优化目标：【如接口响应时间≤100ms/修复xx场景的bug/支持xx新场景】
功能需求：
核心功能：
gateway 验证客户端  access_token
所有业务服务只信 gateway
/auth/refresh
refresh_token 存于Redis
refresh rotate
roles / permissions 放 access_token
gateway → headers 透传 user_id
审计日志 存入mysql中（login / refresh / revoke）
2.  输入参数：【自动生成并注释】
额外要求：
1.  不修改原有核心逻辑和对外接口
2.  标注本次修改的代码行及原因
3.  生成优化后的单元测试，覆盖新增场景
4.  通过新增加功能方式，不能修改现有功能业务逻辑和代码（类/函数需要注释）.
5.  增加测试用例和测试方法和数据.
6.  在READDME.md中增加新记录增日期和日期以及功能.
7.  不能使用任何中文注释.
